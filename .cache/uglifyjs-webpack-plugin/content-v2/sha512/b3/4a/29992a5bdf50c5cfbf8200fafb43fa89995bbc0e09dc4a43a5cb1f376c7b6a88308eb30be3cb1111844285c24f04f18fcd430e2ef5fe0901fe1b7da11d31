{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{\"344\":function(e,t,n){},\"49\":function(e,t,n){\"use strict\";n.r(t);var a=n(0),o=n(425),i=n(1),r=n(421),l=n(154),s=n(105),c=n(121),d=n(115),m=(n(344),n(93)),u=n(94),p=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),f=function get(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if(\"value\"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0};function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var h=function(e){function ResetPassword(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,ResetPassword);for(var a=arguments.length,i=Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=n=_possibleConstructorReturn(this,(e=ResetPassword.__proto__||Object.getPrototypeOf(ResetPassword)).call.apply(e,[this].concat(i))),n.state={\"isDisabled\":!1,\"btnTxt\":\"获取验证码\",\"timer\":\"\",\"phoneVal\":\"\",\"codeImg\":\"\",\"imgCodeVal\":\"\",\"openId\":\"\",\"uuid\":\"\"},n.handlePhoneVal=function(e){n.setState({\"phoneVal\":e.target.value})},n.handleVerCode=function(e){e.preventDefault();\"\"===n.state.phoneVal?Object(o.d)({\"title\":\"请输入手机号\",\"duration\":1e3,\"icon\":\"none\"}):/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[0-9])\\d{8}$/.test(n.state.phoneVal)?\"\"===n.state.imgCodeVal?Object(o.d)({\"title\":\"请输入图形验证码\",\"duration\":2e3,\"icon\":\"none\"}):n.getSendSmsCode():Object(o.d)({\"title\":\"请输入正确的手机号\",\"duration\":2e3,\"icon\":\"none\"})},n.handleImgCodeVal=function(e){n.setState({\"imgCodeVal\":e.detail.value})},n.handleSubmit=function(e){var t=e.detail.value,a=t.confirmPassword,i=t.password,r=t.phone,l=t.verCode,s=t.imgCodeVal;if(\"\"===r)return Object(o.d)({\"title\":\"请输入手机号\",\"duration\":1e3,\"icon\":\"none\"}),!1;if(!/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[0-9])\\d{8}$/.test(r))return Object(o.d)({\"title\":\"请输入正确的手机号\",\"duration\":1e3,\"icon\":\"none\"}),!1;if(\"\"===s)return Object(o.d)({\"title\":\"请输入图形验证码\",\"duration\":1e3,\"icon\":\"none\"}),!1;if(\"\"===l)return Object(o.d)({\"title\":\"请输入验证码\",\"duration\":1e3,\"icon\":\"none\"}),!1;if(\"\"===i)return Object(o.d)({\"title\":\"请输入密码\",\"duration\":1e3,\"icon\":\"none\"}),!1;if(a!==i)return Object(o.d)({\"title\":\"两次密码不一致\",\"duration\":1e3,\"icon\":\"none\"}),!1;var c={\"mobile\":\"\"+r,\"smsCode\":\"\"+l,\"password\":\"\"+i,\"code\":\"\"+s,\"confirmPassword\":\"\"+a,\"type\":2,\"deviceNo\":n.getCookie(\"uid\")};Object(o.b)({\"title\":\"加载中...\",\"mask\":!0,\"success\":function success(){n.getResetPassword(c)}})},n.CodeImgClick=function(){n.getPaplVerCode()},n.config={\"navigationBarTitleText\":\"忘记密码\",\"usingComponents\":{}},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ResetPassword,i[\"a\"].Component),p(ResetPassword,[{\"key\":\"setBtnDisabled\",\"value\":function setBtnDisabled(){var e=this;this.setState({\"isDisabled\":!0});var t=60;this.state.timer=setInterval(function(){t--,e.setState({\"btnTxt\":t+\" s\"}),0===t&&(clearInterval(e.state.timer),e.setState({\"btnTxt\":\"获取验证码\",\"isDisabled\":!1}))},1e3)}},{\"key\":\"getResetPassword\",\"value\":function getResetPassword(e){Object(m.b)(u.a.resetPassword,e).then(function(e){console.log(\"修改密码成功\",e.data),Object(o.a)(),0===e.data.code?Object(o.d)({\"title\":e.data.data,\"duration\":1500,\"icon\":\"none\",\"success\":function success(e){setTimeout(function(){i.a.navigateBack({\"delta\":1})},1500)}}):Object(o.d)({\"title\":e.data.msg,\"duration\":1500,\"icon\":\"none\"})}).catch(function(e){Object(o.a)(),console.log(\"返回数据失败\",e)})}},{\"key\":\"getSendSmsCode\",\"value\":function getSendSmsCode(){var e=this,t=this.getCookie(\"uid\"),n={\"mobile\":\"\"+this.state.phoneVal,\"code\":\"\"+this.state.imgCodeVal,\"type\":2,\"deviceNo\":t};Object(m.b)(u.a.sendSmsCode,n).then(function(t){console.log(\"返回数据成功\",t.data),0===t.data.code?e.setBtnDisabled():(Object(o.d)({\"title\":t.data.msg,\"icon\":\"none\",\"duration\":1e3}),e.getPaplVerCode())}).catch(function(e){console.log(\"返回数据失败\",e)})}},{\"key\":\"getPaplVerCode\",\"value\":function getPaplVerCode(){var e=this,t=this.getCookie(\"uid\");Object(m.b)(u.a.VerCode,{\"deviceNo\":t}).then(function(t){console.log(\"获取图形验证码成功\",t.data),0===t.data.code&&e.setState({\"codeImg\":t.data.data.img})}).catch(function(e){console.log(\"获取图形验证码失败\",e)})}},{\"key\":\"generateUUID\",\"value\":function generateUUID(){var e=(new Date).getTime(),t=\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(\"x\"==t?n:3&n|8).toString(16)});return this.setState({\"uuid\":t}),t}},{\"key\":\"getCookie\",\"value\":function getCookie(e){var t=e+\"=\",n=document.cookie.indexOf(t);if(-1===n)return null;var a=document.cookie.indexOf(\";\",n+t.length);-1===a&&(a=document.cookie.length);var o=document.cookie.substring(n+t.length,a);return unescape(o)}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var e=this;if(\"\"===document.cookie)document.cookie=\"uid=\"+this.generateUUID(),this.getPaplVerCode();else{var t=this.getCookie(\"uid\");this.setState({\"uuid\":t},function(){e.getPaplVerCode()})}}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){}},{\"key\":\"render\",\"value\":function render(){var e=this.state,t=e.isDisabled,o=e.btnTxt,i=e.codeImg;return a.l.createElement(r.a,{\"id\":\"resetpassword\"},a.l.createElement(r.a,{\"className\":\"resetpassword-title\"},\"请填写以下信息\"),a.l.createElement(r.a,{\"className\":\"resetpasw-form\"},a.l.createElement(l.a,{\"onSubmit\":this.handleSubmit},a.l.createElement(r.a,{\"className\":\"form-item\"},a.l.createElement(r.a,{\"className\":\"form-item-title\"},a.l.createElement(\"img\",{\"className\":\"item-icon\",\"src\":n(214)}),a.l.createElement(s.a,null,\"手机号码\")),a.l.createElement(r.a,{\"className\":\"form-item-input\"},a.l.createElement(c.a,{\"name\":\"phone\",\"type\":\"text\",\"onInput\":this.handlePhoneVal,\"placeholder\":\"请输入您的手机号码\"}))),a.l.createElement(r.a,{\"className\":\"form-item\"},a.l.createElement(r.a,{\"className\":\"form-item-title\"},a.l.createElement(\"img\",{\"className\":\"item-icon\",\"src\":n(160)}),a.l.createElement(s.a,null,\"图形验证码\")),a.l.createElement(r.a,{\"className\":\"form-item-input\"},a.l.createElement(c.a,{\"className\":\"verCode-input\",\"onInput\":this.handleImgCodeVal,\"name\":\"imgCodeVal\",\"type\":\"text\",\"placeholder\":\"请输入图片上的结果\"}),a.l.createElement(\"img\",{\"onClick\":this.CodeImgClick,\"src\":i}))),a.l.createElement(r.a,{\"className\":\"form-item\"},a.l.createElement(r.a,{\"className\":\"form-item-title\"},a.l.createElement(\"img\",{\"className\":\"item-icon\",\"src\":n(160)}),a.l.createElement(s.a,null,\"验证码\")),a.l.createElement(r.a,{\"className\":\"form-item-input\"},a.l.createElement(c.a,{\"className\":\"verCode-input\",\"maxLength\":\"8\",\"name\":\"verCode\",\"type\":\"text\",\"placeholder\":\"请输入您收到验证码\"})),a.l.createElement(r.a,{\"className\":\"ver-code-btn\"},a.l.createElement(d.a,{\"disabled\":t,\"onClick\":this.handleVerCode},o))),a.l.createElement(r.a,{\"className\":\"form-item\"},a.l.createElement(r.a,{\"className\":\"form-item-title\"},a.l.createElement(\"img\",{\"className\":\"item-icon\",\"src\":n(161)}),a.l.createElement(s.a,null,\"请输入新密码\")),a.l.createElement(r.a,{\"className\":\"form-item-input\"},a.l.createElement(c.a,{\"name\":\"password\",\"type\":\"password\",\"placeholder\":\"请设置您的密码\"}))),a.l.createElement(r.a,{\"className\":\"form-item\"},a.l.createElement(r.a,{\"className\":\"form-item-title\"},a.l.createElement(\"img\",{\"className\":\"item-icon\",\"src\":n(161)}),a.l.createElement(s.a,null,\"请输入确认密码\")),a.l.createElement(r.a,{\"className\":\"form-item-input\"},a.l.createElement(c.a,{\"name\":\"confirmPassword\",\"type\":\"password\",\"placeholder\":\"请设置您的密码\"}))),a.l.createElement(r.a,{\"className\":\"form-item-btn\"},a.l.createElement(d.a,{\"className\":\"form-btn\",\"formType\":\"submit\"},\"完成\")))))}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){f(ResetPassword.prototype.__proto__||Object.getPrototypeOf(ResetPassword.prototype),\"componentDidHide\",this)&&f(ResetPassword.prototype.__proto__||Object.getPrototypeOf(ResetPassword.prototype),\"componentDidHide\",this).call(this)}}]),ResetPassword}();t.default=h}}]);","extractedComments":[]}