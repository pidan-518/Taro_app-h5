{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{\"319\":function(e,t,n){},\"42\":function(e,t,n){\"use strict\";n.r(t);var a=n(0),o=n(411),i=n(142),r=n(1),l=n(406),c=n(100),s=n(149),m=n(116),d=n(107),u=(n(319),n(91)),p=n(92),f=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),g=function get(e,t,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var o=Object.getPrototypeOf(e);return null===o?void 0:get(o,t,n)}if(\"value\"in a)return a.value;var i=a.get;return void 0!==i?i.call(n):void 0};function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}var h=function(e){function Register(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Register);for(var a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];return t=n=_possibleConstructorReturn(this,(e=Register.__proto__||Object.getPrototypeOf(Register)).call.apply(e,[this].concat(r))),n.state={\"isDisabled\":!1,\"btnTxt\":\"获取验证码\",\"timer\":\"\",\"phoneVal\":\"\",\"codeImg\":\"\",\"imgCodeVal\":\"\",\"uuid\":\"\"},n.handlePhoneVal=function(e){n.setState({\"phoneVal\":e.target.value})},n.handleVerCode=function(e){e.preventDefault();\"\"===n.state.phoneVal?Object(o.d)({\"title\":\"请输入手机号\",\"duration\":1e3,\"icon\":\"none\"}):/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[0-9])\\d{8}$/.test(n.state.phoneVal)?\"\"===n.state.imgCodeVal?Object(o.d)({\"title\":\"请输入图形验证码\",\"duration\":2e3,\"icon\":\"none\"}):n.getSendSmsCode():Object(o.d)({\"title\":\"请输入正确的手机号\",\"duration\":2e3,\"icon\":\"none\"})},n.handleImgCodeVal=function(e){n.setState({\"imgCodeVal\":e.detail.value})},n.handleSubmit=function(e){var t=e.detail.value,a=t.password,r=t.phone,l=t.verCode,c=t.imgCodeVal,s=t.confirmpassword;if(\"\"===r)return Object(o.d)({\"title\":\"请输入手机号\",\"duration\":1e3,\"icon\":\"none\"}),!1;if(!/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[0-9])\\d{8}$/.test(r))return Object(o.d)({\"title\":\"请输入正确的手机号\",\"duration\":1e3,\"icon\":\"none\"}),!1;if(\"\"===c)return Object(o.d)({\"title\":\"请输入图形验证码\",\"duration\":1e3,\"icon\":\"none\"}),!1;if(\"\"===l)return Object(o.d)({\"title\":\"请输入验证码\",\"duration\":1e3,\"icon\":\"none\"}),!1;if(\"\"===a)return Object(o.d)({\"title\":\"请输入密码\",\"duration\":1e3,\"icon\":\"none\"}),!1;if(s!==a)return Object(o.d)({\"title\":\"两次密码不一致\",\"duration\":1e3,\"icon\":\"none\"}),!1;var m=n.getCookie(\"uid\"),d={\"mobile\":\"\"+r,\"smsCode\":\"\"+l,\"password\":\"\"+a,\"code\":\"\"+c,\"confirmPassword\":\"\"+s,\"type\":1,\"recommend\":Object(i.b)(\"registerRecommend\"),\"deviceNo\":m};Object(o.b)({\"title\":\"加载中...\",\"mask\":!0,\"success\":function success(){n.getRegister(d)}})},n.CodeImgClick=function(){n.getPaplVerCode()},n.config={\"navigationBarTitleText\":\"注册\"},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Register,r[\"a\"].Component),f(Register,[{\"key\":\"getRegister\",\"value\":function getRegister(e){var t=this;Object(u.b)(p.a.doRegister,e).then(function(e){console.log(\"注册成功\",e.data),0===e.data.code?(Object(o.a)(),Object(o.d)({\"title\":\"注册成功\",\"duration\":1500,\"icon\":\"none\"}),setTimeout(function(){r.a.redirectTo({\"url\":\"/pages/login/login\"})},1e3)):(Object(o.a)(),Object(o.d)({\"title\":e.data.msg,\"duration\":1500,\"icon\":\"none\"}),t.getPaplVerCode())}).catch(function(e){Object(o.a)(),console.log(\"返回数据失败\",e)})}},{\"key\":\"setBtnDisabled\",\"value\":function setBtnDisabled(){var e=this;this.setState({\"isDisabled\":!0});var t=60;this.state.timer=setInterval(function(){t--,e.setState({\"btnTxt\":t+\" s\"}),0===t&&(clearInterval(e.state.timer),e.setState({\"btnTxt\":\"获取验证码\",\"isDisabled\":!1},function(){e.getPaplVerCode()}))},1e3)}},{\"key\":\"getSendSmsCode\",\"value\":function getSendSmsCode(){var e=this,t=this.getCookie(\"uid\"),n={\"mobile\":\"\"+this.state.phoneVal,\"code\":\"\"+this.state.imgCodeVal,\"type\":1,\"deviceNo\":t};Object(u.b)(p.a.sendSmsCode,n).then(function(t){console.log(\"返回数据成功\",t.data),0===t.data.code?e.setBtnDisabled():(Object(o.d)({\"title\":t.data.msg,\"icon\":\"none\",\"duration\":1e3}),e.getPaplVerCode())}).catch(function(e){console.log(\"返回数据失败\",e)})}},{\"key\":\"getPaplVerCode\",\"value\":function getPaplVerCode(){var e=this,t=this.getCookie(\"uid\");Object(u.b)(p.a.VerCode,{\"deviceNo\":t}).then(function(t){console.log(\"获取图形验证码成功\",t.data),0===t.data.code&&e.setState({\"codeImg\":t.data.data.img})}).catch(function(e){console.log(\"获取图形验证码失败\",e)})}},{\"key\":\"generateUUID\",\"value\":function generateUUID(){var e=(new Date).getTime(),t=\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(\"x\"==t?n:3&n|8).toString(16)});return this.setState({\"uuid\":t}),t}},{\"key\":\"getCookie\",\"value\":function getCookie(e){var t=e+\"=\",n=document.cookie.indexOf(t);if(-1===n)return null;var a=document.cookie.indexOf(\";\",n+t.length);-1===a&&(a=document.cookie.length);var o=document.cookie.substring(n+t.length,a);return unescape(o)}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var e=this;if(\"\"===document.cookie)document.cookie=\"uid=\"+this.generateUUID(),this.getPaplVerCode();else{var t=this.getCookie(\"uid\");this.setState({\"uuid\":t},function(){e.getPaplVerCode()})}}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){}},{\"key\":\"render\",\"value\":function render(){var e=this.state,t=e.isDisabled,o=e.btnTxt,i=e.codeImg;return a.l.createElement(l.a,{\"id\":\"register\"},a.l.createElement(l.a,{\"className\":\"register-title\"},a.l.createElement(c.a,{\"className\":\"title-txt\"},\"请填写以下注册信息\"),a.l.createElement(\"br\",null),a.l.createElement(c.a,{\"className\":\"title-notes\"},\"绑定您的微信号登录更便捷\")),a.l.createElement(l.a,{\"className\":\"register-form\"},a.l.createElement(s.a,{\"onSubmit\":this.handleSubmit},a.l.createElement(l.a,{\"className\":\"form-item\"},a.l.createElement(l.a,{\"className\":\"form-item-title\"},a.l.createElement(\"img\",{\"className\":\"item-icon\",\"src\":n(197)}),a.l.createElement(c.a,null,\"手机号码\")),a.l.createElement(l.a,{\"className\":\"form-item-input\"},a.l.createElement(m.a,{\"name\":\"phone\",\"type\":\"text\",\"onInput\":this.handlePhoneVal,\"placeholder\":\"请输入您的手机号码\",\"adjustPosition\":\"true\"}))),a.l.createElement(l.a,{\"className\":\"form-item\"},a.l.createElement(l.a,{\"className\":\"form-item-title\"},a.l.createElement(\"img\",{\"className\":\"item-icon\",\"src\":n(157)}),a.l.createElement(c.a,null,\"图形验证码\")),a.l.createElement(l.a,{\"className\":\"form-item-input\"},a.l.createElement(m.a,{\"className\":\"verCode-input\",\"onInput\":this.handleImgCodeVal,\"name\":\"imgCodeVal\",\"type\":\"text\",\"placeholder\":\"请输入图片上的结果\"}),a.l.createElement(\"img\",{\"onClick\":this.CodeImgClick,\"src\":i}))),a.l.createElement(l.a,{\"className\":\"form-item\"},a.l.createElement(l.a,{\"className\":\"form-item-title\"},a.l.createElement(\"img\",{\"className\":\"item-icon\",\"src\":n(157)}),a.l.createElement(c.a,null,\"验证码\")),a.l.createElement(l.a,{\"className\":\"form-item-input\"},a.l.createElement(m.a,{\"className\":\"verCode-input\",\"maxLength\":\"8\",\"name\":\"verCode\",\"type\":\"text\",\"placeholder\":\"请输入您收到验证码\"})),a.l.createElement(l.a,{\"className\":\"ver-code-btn\"},a.l.createElement(d.a,{\"disabled\":t,\"onClick\":this.handleVerCode},o))),a.l.createElement(l.a,{\"className\":\"form-item\"},a.l.createElement(l.a,{\"className\":\"form-item-title\"},a.l.createElement(\"img\",{\"className\":\"item-icon\",\"src\":n(158)}),a.l.createElement(c.a,null,\"密码\")),a.l.createElement(l.a,{\"className\":\"form-item-input\"},a.l.createElement(m.a,{\"name\":\"password\",\"type\":\"password\",\"placeholder\":\"请设置您的密码\"}))),a.l.createElement(l.a,{\"className\":\"form-item\"},a.l.createElement(l.a,{\"className\":\"form-item-title\"},a.l.createElement(\"img\",{\"className\":\"item-icon\",\"src\":n(158)}),a.l.createElement(c.a,null,\"确认密码\")),a.l.createElement(l.a,{\"className\":\"form-item-input\"},a.l.createElement(m.a,{\"name\":\"confirmpassword\",\"type\":\"password\",\"placeholder\":\"请输入确认密码\",\"adjustPosition\":\"true\"}))),a.l.createElement(l.a,{\"className\":\"form-item-btn\"},a.l.createElement(d.a,{\"className\":\"form-btn\",\"formType\":\"submit\"},\"注册\")))))}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){g(Register.prototype.__proto__||Object.getPrototypeOf(Register.prototype),\"componentDidHide\",this)&&g(Register.prototype.__proto__||Object.getPrototypeOf(Register.prototype),\"componentDidHide\",this).call(this)}}]),Register}();t.default=h}}]);","extractedComments":[]}