{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{\"391\":function(e,t,a){},\"67\":function(t,a,n){\"use strict\";n.r(a),n.d(a,\"default\",function(){return B});var r=n(0),s=n(411),o=n(115),i=n(7),c=n(1),l=n(142),m=n(151),u=n(406),d=n(409),p=n(100),h=n(116),g=(n(391),n(201)),b=n.n(g),f=n(202),S=n.n(f),x=n(160),y=n.n(x),N=n(161),E=n.n(N),P=n(162),w=n.n(P),v=n(91),k=n(92),F=n(106),C=n(102),I=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var B=function(t){function index(t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,index);var a=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(index.__proto__||Object.getPrototypeOf(index)).call(this,t));return a.getModel=function(){a.setState({\"isShowModal\":!a.state.isShowModal,\"isShowSelect\":!1})},a.getSelect=function(){a.setState({\"isShowSelect\":!a.state.isShowSelect,\"isShowModal\":!1})},a.getSelectsale=function(){a.setState({\"priceSort\":\"\",\"saleSort\":1==a.state.saleSort?0:1,\"current\":1},function(){a.getItemByBrandId(1)})},a.getSelectlist=function(e){a.setState({\"priceSort\":e,\"saleSort\":\"\",\"current\":1,\"isShowSelect\":!1},function(){console.log(a.state.priceSort),a.getItemByBrandId(1)})},a.getSelectFree=function(t){var n=0,r=0;\"two\"==t?1===a.state.taxFree&&1===a.state.expressFree?(n=\"\",r=\"\"):(n=1,r=1):\"expressFree\"==t?\"\"===a.state.taxFree&&1===a.state.expressFree?(n=\"\",r=\"\"):(n=\"\",r=1):1===a.state.taxFree&&\"\"===a.state.expressFree?(n=\"\",r=\"\"):(n=1,r=\"\"),a.setState({\"taxFree\":n,\"expressFree\":r}),e.stopPropagation()},a.getSubmit=function(e){if(\"reset\"==e)a.setState({\"minPrice\":\"\",\"maxPrice\":\"\",\"expressFree\":\"\",\"taxFree\":\"\"});else{if(console.log(a.state.minPrice,a.state.maxPrice),a.state.maxPrice&&Number(a.state.maxPrice)<=Number(a.state.minPrice))return void Object(s.d)({\"title\":\"最高价不可小于最低价\",\"icon\":\"none\",\"duration\":2e3});a.setState({\"isShowModal\":!1,\"current\":1},function(){a.getItemByBrandId(1)})}e.stopPropagation()},a.getNavigateApp=function(e,t){console.log(t,\"11111111\"),t.itemId?\"android\"===window.sessionStorage.getItem(\"system\")?click.toGoodsDetail(t.itemId):window.webkit.messageHandlers.toGoodsDetail.postMessage(t.itemId):Object(s.d)({\"title\":\"参数出现null\",\"icon\":\"none\"}),e.stopPropagation()},a.config={\"navigationBarTitleText\":\"null\"!=a.$router.params.name?decodeURI(a.$router.params.name):\"品牌闪购\"},a.state={\"isShowSelect\":!1,\"isShowModal\":!1,\"brandImage\":\"\",\"list\":[],\"current\":1,\"pages\":1,\"priceSort\":\"\",\"minPrice\":\"\",\"maxPrice\":\"\",\"taxFree\":\"\",\"expressFree\":\"\",\"saleSort\":\"\"},a}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(index,c[\"a\"].Component),I(index,[{\"key\":\"componentWillMount\",\"value\":function componentWillMount(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){console.log(this.$router.params.brandId),Object(o.b)({\"title\":this.$router.params.name}),this.getItemByBrandId(1),this.setState({\"brandImage\":window.sessionStorage.getItem(\"brandImage\")})}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){this._offReachBottom=Object(i.a)({\"callback\":this.onReachBottom,\"ctx\":this,\"onReachBottomDistance\":void 0})}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){this._offReachBottom&&this._offReachBottom()}},{\"key\":\"navigateTo\",\"value\":function navigateTo(e){c.a.navigateTo({\"url\":e})}},{\"key\":\"onShareAppMessage\",\"value\":function onShareAppMessage(){return{\"title\":\"优质品牌，低价闪购，每日上新别错过！\",\"path\":\"/pagesapp/brand/brand?shareRecommend=\"+Object(l.b)(\"shareRecommend\"),\"imageUrl\":\"https://iconmall-developer.oss-cn-beijing.aliyuncs.com/png/small/share/brand-image.jpg\"}}},{\"key\":\"onReachBottom\",\"value\":function onReachBottom(){console.log(\"到底了\",this.state.current),this.state.current===this.state.pages?console.log(\"进入\"):0!==this.state.pages&&(Object(s.b)({\"title\":\"正在加载...\"}),this.getItemByBrandId(this.state.current+1))}},{\"key\":\"getItemByBrandId\",\"value\":function getItemByBrandId(e){var t=this;Object(v.b)(k.a.getItemByBrandId,{\"source\":50,\"current\":e,\"len\":10,\"brandId\":this.$router.params.brandId,\"priceSort\":this.state.priceSort,\"minPrice\":this.state.minPrice,\"maxPrice\":this.state.maxPrice,\"taxFree\":this.state.taxFree,\"expressFree\":this.state.expressFree,\"saleSort\":this.state.saleSort}).then(function(a){console.log(\"获取品牌分类列表成功\",a.data),0===a.data.code&&(1==e&&Object(m.a)({\"scrollTop\":0,\"duration\":300}),t.setState({\"list\":1==e?[].concat(_toConsumableArray(a.data.data.records)):[].concat(_toConsumableArray(t.state.list),_toConsumableArray(a.data.data.records)),\"current\":a.data.data.current,\"pages\":a.data.data.pages}),Object(s.a)())}).catch(function(e){console.log(\"获取品牌分类列表失敗\",e)})}},{\"key\":\"change\",\"value\":function change(e,t){var a=e.target.value;a=a.match(/^\\d*(\\.?\\d{0,2})/g)[0]||null,this.setState({\"minPrice\":\"minPrice\"==t?a:this.state.minPrice,\"maxPrice\":\"maxPrice\"==t?a:this.state.maxPrice}),console.log(this.state.minPrice,this.state.maxPrice)}},{\"key\":\"render\",\"value\":function render(){var t=this,a=this.state,n=a.brandImage,s=a.isShowSelect,o=a.isShowModal,i=a.list,c=a.minPrice,l=a.maxPrice,m=a.taxFree,g=a.expressFree,f=a.pages,x=a.current,N=a.saleSort,P=a.priceSort;return r.l.createElement(u.a,{\"className\":\"brandlist\"},r.l.createElement(d.a,{\"className\":\"bg\",\"src\":n}),r.l.createElement(u.a,{\"className\":\"select\"},r.l.createElement(u.a,{\"className\":\"\"===N?\"item on\":\"item\",\"onClick\":this.getSelect},0===P?\"价格降序\":1===P?\"价格升序\":\"综合排序\"),r.l.createElement(u.a,{\"className\":1===N||0===N?\"item on\":\"item\",\"onClick\":this.getSelectsale},\"销量\"),r.l.createElement(u.a,{\"className\":\"item no-border\",\"onClick\":this.getModel},\"筛选\",r.l.createElement(d.a,{\"className\":\"ic\",\"src\":b.a})),s?r.l.createElement(u.a,{\"className\":\"item-select\"},r.l.createElement(u.a,{\"className\":\"text\",\"onClick\":this.getSelectlist.bind(this,\"\")},\"综合排序\"),r.l.createElement(u.a,{\"className\":\"text\",\"onClick\":this.getSelectlist.bind(this,1)},\"价格升序\"),r.l.createElement(u.a,{\"className\":\"text\",\"onClick\":this.getSelectlist.bind(this,0)},\"价格降序\")):\"\"),r.l.createElement(u.a,{\"className\":\"list\"},0==i.length?r.l.createElement(C.a,{\"content\":\"暂无数据\"}):i.map(function(e,a){return r.l.createElement(u.a,{\"className\":\"goodItem\",\"onClick\":function onClick(a){return t.getNavigateApp(a,e)}},r.l.createElement(u.a,{\"className\":\"bao\"},1==e.expressFree&&0==e.taxFree?r.l.createElement(d.a,{\"className\":\"bg-bao\",\"src\":y.a}):\"\",1==e.expressFree&&1==e.taxFree?r.l.createElement(d.a,{\"className\":\"bg-bao\",\"src\":w.a}):\"\",0==e.expressFree&&1==e.taxFree?r.l.createElement(d.a,{\"className\":\"bg-bao\",\"src\":E.a}):\"\"),r.l.createElement(d.a,{\"className\":\"pic\",\"src\":F.a.transWebp(e.image)}),r.l.createElement(u.a,{\"className\":\"name\"},e.itemName),r.l.createElement(u.a,{\"className\":\"price\"},\"￥\",e.discountPrice,e.discountPrice!=e.price?r.l.createElement(p.a,{\"className\":\"old\"},\"￥\",e.price):\"\",r.l.createElement(d.a,{\"className\":\"logo\",\"src\":F.a.transWebp(e.sign)})))})),f==x?r.l.createElement(u.a,{\"className\":\"no-more\"},\"-没有更多啦-\"):\"\",o?r.l.createElement(u.a,{\"className\":\"model\",\"onClick\":this.getModel},r.l.createElement(u.a,{\"className\":o?\"dailog on\":\"dailog\",\"onClick\":function onClick(){e.stopPropagation()}},r.l.createElement(d.a,{\"className\":\"close\",\"src\":S.a,\"onClick\":this.getModel}),r.l.createElement(u.a,{\"className\":\"title\"},\"折扣和服务\"),r.l.createElement(u.a,{\"className\":\"select-item\"},r.l.createElement(u.a,{\"className\":1==g&&0==m?\"item on\":\"item\",\"onClick\":this.getSelectFree.bind(this,\"expressFree\")},\"包邮\"),r.l.createElement(u.a,{\"className\":1==m&&0==g?\"item on\":\"item\",\"onClick\":this.getSelectFree.bind(this,\"taxFree\")},\"包税\"),r.l.createElement(u.a,{\"className\":1==g&&1==m?\"item on\":\"item\",\"onClick\":this.getSelectFree.bind(this,\"two\")},\"包邮包税\")),r.l.createElement(u.a,{\"className\":\"title\"},\"价格区间\"),r.l.createElement(u.a,{\"className\":\"price-div\"},r.l.createElement(h.a,{\"className\":\"inp\",\"type\":\"number\",\"placeholder\":\"最低价\",\"value\":c,\"onChange\":function onChange(e){t.change(e,\"minPrice\")}}),r.l.createElement(p.a,{\"className\":\"zhi\"},\"-\"),r.l.createElement(h.a,{\"className\":\"inp\",\"type\":\"number\",\"placeholder\":\"最高价\",\"value\":l,\"onChange\":function onChange(e){t.change(e,\"maxPrice\")}})),r.l.createElement(u.a,{\"className\":\"btn\"},r.l.createElement(u.a,{\"className\":\"reset\",\"onClick\":this.getSubmit.bind(this,\"reset\")},\"重置\"),r.l.createElement(u.a,{\"className\":\"sub\",\"onClick\":this.getSubmit.bind(this,\"submit\")},\"确定\")))):\"\")}}]),index}()}}]);","extractedComments":[]}