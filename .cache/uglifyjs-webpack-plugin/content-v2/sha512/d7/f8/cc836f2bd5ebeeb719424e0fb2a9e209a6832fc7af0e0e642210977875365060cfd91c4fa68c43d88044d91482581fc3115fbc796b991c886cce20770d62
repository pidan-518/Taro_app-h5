{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{\"415\":function(e,t,a){},\"70\":function(e,t,a){\"use strict\";a.r(t),a.d(t,\"default\",function(){return I});var r=a(0),s=a(156),n=a(425),o=a(120),i=a(157),c=a(7),l=a(1),m=a(421),u=a(423),d=a(105),p=a(121),h=(a(415),a(163)),g=a.n(h),f=a(164),b=a.n(f),S=a(145),x=a.n(S),y=a(146),N=a.n(y),E=a(147),v=a.n(E),P=a(93),w=a(94),C=a(108),F=a(107),k=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var I=function(e){function index(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,index);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(index.__proto__||Object.getPrototypeOf(index)).call(this,e));return t.getGoodsList=function(e,a){Object(P.b)(w.a.getItemListByComIds,{\"comIds\":e,\"current\":a,\"len\":10,\"source\":10,\"priceOrder\":\"\"===t.state.priceSort?\"\":1===t.state.priceSort?\"asc\":\"desc\",\"minPrice\":t.state.minPrice,\"maxPrice\":t.state.maxPrice,\"taxFree\":t.state.taxFree,\"expressFree\":t.state.expressFree,\"saleOrder\":\"\"===t.state.saleSort?\"\":0===t.state.saleSort?\"desc\":\"asc\"}).then(function(e){0===e.data.code?(1==a&&Object(s.a)({\"scrollTop\":0,\"duration\":300}),t.setState({\"list\":1==a?[].concat(_toConsumableArray(e.data.data.records)):[].concat(_toConsumableArray(t.state.list),_toConsumableArray(e.data.data.records)),\"current\":e.data.data.current,\"pages\":e.data.data.pages}),Object(n.a)()):Object(n.c)({\"title\":\"提示\",\"content\":\"商品：\"+e.data.msg,\"showCancel\":!1})})},t.getModel=function(){t.setState({\"isShowModal\":!t.state.isShowModal,\"isShowSelect\":!1})},t.getSelect=function(){t.setState({\"isShowSelect\":!t.state.isShowSelect,\"isShowModal\":!1})},t.getSelectsale=function(){t.setState({\"priceSort\":\"\",\"saleSort\":\"\"===t.state.saleSort?0:1==t.state.saleSort?0:1,\"current\":1},function(){0==t.$router.params.pageState?t.getGoodsList(void 0==t.$router.params.comid?null:t.$router.params.comid.split(\",\"),1):t.getItemByBrandId(1),Object(s.a)({\"scrollTop\":0,\"duration\":300})})},t.getSelectlist=function(e){console.log(\"排行\"),t.setState({\"priceSort\":e,\"saleSort\":\"\",\"current\":1,\"isShowSelect\":!1},function(){console.log(\"价格排序\",e),0==t.$router.params.pageState?t.getGoodsList(void 0==t.$router.params.comid?null:t.$router.params.comid.split(\",\"),1):t.getItemByBrandId(1),Object(s.a)({\"scrollTop\":0,\"duration\":300})})},t.getSelectFree=function(e){var a=0,r=0;\"two\"==e?1===t.state.taxFree&&1===t.state.expressFree?(a=\"\",r=\"\"):(a=1,r=1):\"expressFree\"==e?\"\"===t.state.taxFree&&1===t.state.expressFree?(a=\"\",r=\"\"):(a=\"\",r=1):1===t.state.taxFree&&\"\"===t.state.expressFree?(a=\"\",r=\"\"):(a=1,r=\"\"),t.setState({\"taxFree\":a,\"expressFree\":r})},t.getSubmit=function(e){if(console.log(\"筛选\"),\"reset\"==e)t.setState({\"minPrice\":\"\",\"maxPrice\":\"\",\"expressFree\":\"\",\"taxFree\":\"\"});else{if(console.log(t.state.minPrice,t.state.maxPrice),t.state.maxPrice&&Number(t.state.maxPrice)<=Number(t.state.minPrice))return void Object(n.d)({\"title\":\"最高价不可小于最低价\",\"icon\":\"none\",\"duration\":2e3});t.setState({\"isShowModal\":!1,\"current\":1},function(){0==t.$router.params.pageState?t.getGoodsList(void 0==t.$router.params.comid?null:t.$router.params.comid.split(\",\"),1):t.getItemByBrandId(1)})}},t.getNavigateApp=function(e,t){console.log(\"商品id：\",t.itemId),t.itemId?\"android\"===window.sessionStorage.getItem(\"system\")?click.toGoodsDetail(t.itemId):window.webkit.messageHandlers.toGoodsDetail.postMessage(t.itemId):Object(n.d)({\"title\":\"参数出现null\",\"icon\":\"none\"}),e.stopPropagation()},t.config={\"navigationBarTitleText\":\"null\"!=t.$router.params.name?decodeURI(t.$router.params.name):\"品牌闪购\"},t.state={\"isShowSelect\":!1,\"isShowModal\":!1,\"brandImage\":\"\",\"list\":[],\"current\":1,\"pages\":1,\"priceSort\":\"\",\"minPrice\":\"\",\"maxPrice\":\"\",\"taxFree\":\"\",\"expressFree\":\"\",\"saleSort\":\"\",\"pageState\":0},t}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(index,l[\"a\"].Component),k(index,[{\"key\":\"componentWillMount\",\"value\":function componentWillMount(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){console.log(\"代理人信息：\",this.$router.params.shareRecommend),Object(o.a)({\"frontColor\":\"0\"===this.$router.params.pageState?\"#000000\":\"#ffffff\",\"backgroundColor\":\"0\"===this.$router.params.pageState?\"#fff\":\"#562FC3\"}),this.setState({\"brandImage\":Object(i.b)(\"brandImage\")});var e=this.$router.params.pageState;if(0==e){var t=this.$router.params.comid.split(\",\");this.getGoodsList(t,1)}else 1==e&&this.getItemByBrandId(1);this.setState({\"pageState\":this.$router.params.pageState})}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){this.setState({\"list\":[]})}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){C.a.updateRecommendCode(this.$router.params.shareRecommend),this._offReachBottom=Object(c.a)({\"callback\":this.onReachBottom,\"ctx\":this,\"onReachBottomDistance\":void 0})}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){this._offReachBottom&&this._offReachBottom()}},{\"key\":\"navigateTo\",\"value\":function navigateTo(e){l.a.navigateTo({\"url\":e})}},{\"key\":\"onReachBottom\",\"value\":function onReachBottom(){console.log(\"到底了\",this.state.current),this.state.current===this.state.pages?console.log(\"进入\"):0!==this.state.pages&&(Object(n.b)({\"title\":\"正在加载...\"}),0==this.$router.params.pageState?this.getGoodsList(void 0==this.$router.params.comid?null:this.$router.params.comid.split(\",\"),this.state.current+1):this.getItemByBrandId(this.state.current+1))}},{\"key\":\"getItemByBrandId\",\"value\":function getItemByBrandId(e){var t=this;Object(P.b)(w.a.getItemByBrandId,{\"source\":10,\"current\":e,\"len\":10,\"brandId\":this.$router.params.brandId,\"priceSort\":this.state.priceSort,\"minPrice\":this.state.minPrice,\"maxPrice\":this.state.maxPrice,\"taxFree\":this.state.taxFree,\"expressFree\":this.state.expressFree,\"saleSort\":this.state.saleSort}).then(function(a){console.log(\"获取品牌分类列表成功\",a.data),0===a.data.code&&(1==e&&Object(s.a)({\"scrollTop\":0,\"duration\":300}),t.setState({\"list\":1==e?[].concat(_toConsumableArray(a.data.data.records)):[].concat(_toConsumableArray(t.state.list),_toConsumableArray(a.data.data.records)),\"current\":a.data.data.current,\"pages\":a.data.data.pages}),Object(n.a)())}).catch(function(e){console.log(\"获取品牌分类列表失敗\",e)})}},{\"key\":\"change\",\"value\":function change(e,t){var a=e.target.value;a=a.match(/^\\d*(\\.?\\d{0,2})/g)[0]||null,this.setState({\"minPrice\":\"minPrice\"==t?a:this.state.minPrice,\"maxPrice\":\"maxPrice\"==t?a:this.state.maxPrice}),console.log(this.state.minPrice,this.state.maxPrice)}},{\"key\":\"render\",\"value\":function render(){var e=this,t=this.state,a=t.brandImage,s=t.isShowSelect,n=t.isShowModal,o=t.list,i=t.minPrice,c=t.maxPrice,l=t.taxFree,h=t.expressFree,f=t.pages,S=t.current,y=t.saleSort,E=t.priceSort;return r.l.createElement(m.a,{\"className\":\"brandlist\"},\"0\"===this.$router.params.pageState?null:r.l.createElement(u.a,{\"className\":\"bg\",\"src\":a}),r.l.createElement(m.a,{\"className\":\"select\"},r.l.createElement(m.a,{\"className\":\"\"===y?\"item on\":\"item\",\"onClick\":this.getSelect},0===E?\"价格降序\":1===E?\"价格升序\":\"综合排序\"),r.l.createElement(m.a,{\"className\":1===y||0===y?\"item on\":\"item\",\"onClick\":this.getSelectsale},\"销量\"),r.l.createElement(m.a,{\"className\":\"item no-border\",\"onClick\":this.getModel},\"筛选\",r.l.createElement(u.a,{\"className\":\"ic\",\"src\":g.a})),s?r.l.createElement(m.a,{\"className\":\"item-select\"},r.l.createElement(m.a,{\"className\":\"text\",\"onClick\":this.getSelectlist.bind(this,\"\")},\"综合排序\"),r.l.createElement(m.a,{\"className\":\"text\",\"onClick\":this.getSelectlist.bind(this,1)},\"价格升序\"),r.l.createElement(m.a,{\"className\":\"text\",\"onClick\":this.getSelectlist.bind(this,0)},\"价格降序\")):\"\"),r.l.createElement(m.a,{\"className\":\"list\"},0==o.length?r.l.createElement(F.a,{\"content\":\"暂无数据\"}):o.map(function(t,a){return r.l.createElement(m.a,{\"key\":t.id,\"className\":\"goodItem\",\"onClick\":function onClick(a){return e.getNavigateApp(a,t)}},r.l.createElement(m.a,{\"className\":\"bao\"},1==t.expressFree&&0==t.taxFree?r.l.createElement(u.a,{\"className\":\"bg-bao\",\"src\":x.a}):\"\",1==t.expressFree&&1==t.taxFree?r.l.createElement(u.a,{\"className\":\"bg-bao\",\"src\":v.a}):\"\",0==t.expressFree&&1==t.taxFree?r.l.createElement(u.a,{\"className\":\"bg-bao\",\"src\":N.a}):\"\"),r.l.createElement(u.a,{\"className\":\"pic\",\"src\":void 0==t.image?null:C.a.transWebp(t.image)}),r.l.createElement(m.a,{\"className\":\"name\"},t.itemName),r.l.createElement(m.a,{\"className\":\"price\"},\"￥\",t.discountPrice,t.discountPrice!=t.price?r.l.createElement(d.a,{\"className\":\"old\"},\"￥\",t.price):\"\",void 0==t.sign?null:r.l.createElement(u.a,{\"className\":\"logo\",\"src\":C.a.transWebp(t.sign)})))})),f==S?r.l.createElement(m.a,{\"className\":\"no-more\"},\"-没有更多啦-\"):\"\",n?r.l.createElement(m.a,{\"className\":\"model\"},r.l.createElement(m.a,{\"className\":\"dailog\"},r.l.createElement(u.a,{\"className\":\"close\",\"src\":b.a,\"onClick\":this.getModel}),r.l.createElement(m.a,{\"className\":\"title\"},\"折扣和服务\"),r.l.createElement(m.a,{\"className\":\"select-item\"},r.l.createElement(m.a,{\"className\":1==h&&0==l?\"item on\":\"item\",\"onClick\":this.getSelectFree.bind(this,\"expressFree\")},\"包邮\"),r.l.createElement(m.a,{\"className\":1==l&&0==h?\"item on\":\"item\",\"onClick\":this.getSelectFree.bind(this,\"taxFree\")},\"包税\"),r.l.createElement(m.a,{\"className\":1==h&&1==l?\"item on\":\"item\",\"onClick\":this.getSelectFree.bind(this,\"two\")},\"包邮包税\")),r.l.createElement(m.a,{\"className\":\"title\"},\"价格区间\"),r.l.createElement(m.a,{\"className\":\"price-div\"},r.l.createElement(p.a,{\"className\":\"inp\",\"type\":\"number\",\"placeholder\":\"最低价\",\"value\":i,\"onChange\":function onChange(t){e.change(t,\"minPrice\")}}),r.l.createElement(d.a,{\"className\":\"zhi\"},\"-\"),r.l.createElement(p.a,{\"className\":\"inp\",\"type\":\"number\",\"placeholder\":\"最高价\",\"value\":c,\"onChange\":function onChange(t){e.change(t,\"maxPrice\")}})),r.l.createElement(m.a,{\"className\":\"btn\"},r.l.createElement(m.a,{\"className\":\"reset\",\"onClick\":this.getSubmit.bind(this,\"reset\")},\"重置\"),r.l.createElement(m.a,{\"className\":\"sub\",\"onClick\":this.getSubmit.bind(this,\"submit\")},\"确定\")))):\"\")}}]),index}()}}]);","extractedComments":[]}