{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{\"383\":function(e,t,s){},\"64\":function(e,t,s){\"use strict\";s.r(t),s.d(t,\"default\",function(){return h});var a=s(0),o=s(411),i=s(115),r=s(1),n=s(406),c=s(100),d=s(107),m=s(116),l=s(191),p=(s(148),s(92)),u=s(91),g=(s(90),s(383),function(){function defineProperties(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,s){return t&&defineProperties(e.prototype,t),s&&defineProperties(e,s),e}}());var h=function(e){function DrpGoodsDetails(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,DrpGoodsDetails);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(DrpGoodsDetails.__proto__||Object.getPrototypeOf(DrpGoodsDetails)).call(this,e));return t.agentGoodDetail=function(){var e=JSON.parse(t.$router.params.itemId),s=window.sessionStorage.getItem(\"drpRecommend\"),a={\"itemId\":e};Object(u.a)(p.a.agentGoodDetail,a).then(function(e){if(0===e.data.code){var a=e.data.data,i=a.itemSpecList,r=[];i.forEach(function(e){var t=!1;if(r.forEach(function(s){s.specName===e.specName&&(s.classList.push(e),t=!0)}),!t){var s={\"specName\":e.specName,\"classList\":[e]};r.push(s)}console.log(r,\"recomSpecList\")}),t.setState({\"detail\":a,\"specTagName\":i[0].specTagName,\"classTagName\":i[0].classTagName,\"recomSpecList\":r,\"selectClassList\":r[0].classList,\"selectSpecName\":i[0].specName,\"selectClassName\":i[0].className,\"itemSpecClassId\":i[0].id,\"drpRecommend\":\"undefined\"!==s?s:\"\"})}else Object(o.c)({\"title\":\"提示\",\"content\":e.data.msg,\"showCancel\":!1})})},t.handleChooseSpec=function(){t.setState({\"visiSpec\":!0})},t.handleChangeSpec=function(e){var s=[];t.state.recomSpecList.forEach(function(a){if(a.specName===e){var o=!1;(s=a.classList).forEach(function(e){e.className===t.state.selectClassName&&(o=!0,t.setState({\"itemSpecClassId\":e.id}))}),o||t.setState({\"selectClassName\":s[0].className,\"itemSpecClassId\":s[0].id})}}),t.setState({\"selectSpecName\":e,\"selectClassList\":s})},t.handleChangeClass=function(e){t.setState({\"selectClassName\":e.className,\"itemSpecClassId\":e.id})},t.handleBuy=function(){if(\"android\"===window.sessionStorage.getItem(\"system\"))click.toCommitOrder(t.$router.params.itemId,t.state.itemSpecClassId,1,t.state.drpRecommend);else{var e={\"itemId\":t.$router.params.itemId,\"itemSpecClassId\":t.state.itemSpecClassId,\"num\":1,\"recommendCode\":t.state.drpRecommend};window.webkit.messageHandlers.toCommitOrder.postMessage(e)}},t.changeDrpRecommend=function(e){t.setState({\"drpRecommend\":e.target.value})},t.state={\"imgUrl\":\"\",\"name\":\"\",\"introduction\":\"\",\"detail\":{},\"specTagName\":\"\",\"selectSpecName\":\"\",\"classTagName\":\"\",\"selectClassList\":[],\"selectClassName\":\"\",\"recomSpecList\":[],\"visiSpec\":!1,\"itemSpecClassId\":0,\"drpRecommend\":\"\"},t}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(DrpGoodsDetails,r[\"a\"].Component),g(DrpGoodsDetails,[{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){Object(i.b)({\"title\":\"商品详情\"})}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){this.agentGoodDetail()}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){}},{\"key\":\"render\",\"value\":function render(){var e=this,t=this.state,s=t.detail,o=t.specTagName,i=t.classTagName,r=t.selectClassList,p=t.recomSpecList,u=t.visiSpec,g=t.selectSpecName,h=t.selectClassName,y=t.drpRecommend;return a.l.createElement(n.a,{\"className\":\"drpGoodsDetails\"},a.l.createElement(\"img\",{\"src\":s.image,\"alt\":\"\",\"className\":\"img\"}),a.l.createElement(n.a,{\"className\":\"text_wrap\"},a.l.createElement(c.a,{\"className\":\"name\"},s.itemName),a.l.createElement(c.a,{\"className\":\"introduction\"},s.itemIntro)),a.l.createElement(n.a,{\"className\":\"spec_ctl_wrap\"},a.l.createElement(d.a,{\"className\":\"spec_ctl\",\"onClick\":this.handleChooseSpec},\"选择规格\")),a.l.createElement(l.a,{\"isOpened\":u,\"className\":\"spec_wrap\"},a.l.createElement(n.a,{\"className\":\"spec_module_list\"},a.l.createElement(n.a,{\"className\":\"spec_module spec\"},a.l.createElement(c.a,{\"className\":\"title\"},o),a.l.createElement(n.a,{\"className\":\"spec_item_list\"},p.map(function(t){return a.l.createElement(d.a,{\"className\":\"spec_item \"+(t.specName===g?\"select\":\"\"),\"onClick\":e.handleChangeSpec.bind(e,t.specName)},t.specName)}))),a.l.createElement(n.a,{\"className\":\"spec_module spec\"},a.l.createElement(c.a,{\"className\":\"title\"},i),a.l.createElement(n.a,{\"className\":\"spec_item_list\"},r.map(function(t){return a.l.createElement(d.a,{\"className\":\"spec_item \"+(t.className===h?\"select\":\"\"),\"onClick\":e.handleChangeClass.bind(e,t)},t.className)})))),a.l.createElement(n.a,{\"className\":\"buy_wrap\"},a.l.createElement(n.a,{\"className\":\"drpRecommend_warp\"},\"代理人邀请码：\",a.l.createElement(m.a,{\"className\":\"drpRecommend\",\"onInput\":function onInput(t){e.changeDrpRecommend(t)},\"onBlur\":function onBlur(t){e.changeDrpRecommend(t)},\"value\":y,\"placeholder\":\"请输入代理人邀请码\",\"maxLength\":\"10\"})),a.l.createElement(d.a,{\"className\":\"buy\",\"onClick\":this.handleBuy},\"购买\"))))}}]),DrpGoodsDetails}()},\"90\":function(e,t,s){},\"91\":function(e,t,s){\"use strict\";s.d(t,\"a\",function(){return CarryTokenRequest}),s.d(t,\"b\",function(){return postRequest});var a=s(407),o=s(411),i=s(1),r=s(142);function CarryTokenRequest(e,t){return new Promise(function(s,r){Object(a.a)({\"url\":e,\"method\":\"POST\",\"data\":JSON.stringify(t),\"credentials\":\"include\",\"header\":{\"Content-Type\":\"application/json\",\"JWT-Token\":window.sessionStorage.getItem(\"JWT-Token\")},\"success\":function success(e){e.statusCode>=200&&e.statusCode<300?s(e):r(e)},\"fail\":function fail(e){if(r(e),403===e.status){var t=window.location.hash.indexOf(\"?\");[\"\",\"#/pages/index/index\"].includes(window.location.hash)||\"#/pages/goodsdetails/goodsdetails\"===window.location.hash.slice(0,t)?console.log(\"进入\"):Object(o.d)({\"title\":\"暂未登录\",\"icon\":\"none\",\"duration\":1e3,\"success\":function success(){window.sessionStorage.removeItem(\"JWT-Token\"),window.sessionStorage.removeItem(\"userinfo\"),setTimeout(function(){i.a.navigateTo({\"url\":\"/pages/login/login\"})},1e3)}})}else Object(o.d)({\"title\":\"网络连接失败\",\"icon\":\"none\",\"duration\":1e3,\"success\":function success(){}})}})})}function postRequest(e,t){return new Promise(function(s,o){Object(a.a)({\"url\":e,\"method\":\"POST\",\"data\":JSON.stringify(t),\"header\":{\"Content-Type\":\"application/json; charset=utf-8\",\"JWT-Token\":Object(r.b)(\"JWT-Token\")},\"success\":function success(e){e.statusCode>=200&&e.statusCode<300?s(e):o(e)}})})}},\"92\":function(e,t,s){\"use strict\";var a;function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{\"value\":s,\"enumerable\":!0,\"configurable\":!0,\"writable\":!0}):e[t]=s,e}var o=\"\",i=(_defineProperty(a={\"VerCode\":(o=\"http://192.168.0.181/client-core\")+\"/register/code\",\"checkUserName\":o+\"/register/checkUserName\",\"checkMobile\":o+\"/register/checkMobile\",\"sendSmsCode\":o+\"/register/sendSmsCode\",\"doRegister\":o+\"/register/doRegister\",\"Login\":o+\"/login\",\"Logout\":o+\"/logout\",\"resetPassword\":o+\"/register/resetPassword\",\"getMyRecommondCode\":o+\"/user/getMyRecommondCode\",\"wechatLogin\":o+\"/wechatLogin\",\"bindWechat\":o+\"/bindWechat\",\"wechatBindCode\":o+\"/wechatBindCode\",\"sendBindSmsCode\":o+\"/sendBindSmsCode\",\"wechatUnBindCode\":o+\"/user/wechatUnBindCode\",\"sendUnBindSmsCode\":o+\"/user/sendUnBindSmsCode\",\"unBindWechat\":o+\"/user/unBindWechat\",\"homeProducts\":o+\"/index/homeProducts\",\"homePicture\":o+\"/index/homePicture\",\"getNewItemList\":o+\"/index/getNewItemList\",\"hotSearchWord\":o+\"/index/hotSearchWord\",\"suspensionTag\":o+\"/index/suspensionTag\",\"searchItems\":o+\"/index/searchItems\",\"getCustomerServiceAccid\":o+\"/user/getCustomerServiceAccid\",\"getSencondCategory\":o+\"/index/getSencondCategory\",\"getThirdCategory\":o+\"/index/getThirdCategory\",\"getIndexCategoryImg\":o+\"/index/getIndexCategoryImg\",\"shoppingCart\":o+\"/shoppingCart/insert\",\"getCart\":o+\"/shopping/getCart\",\"gotoSettlement\":o+\"/shopping/gotoSettlement\",\"getOrderFee\":o+\"/shopping/getOrderFee\",\"deleteProduction\":o+\"/shoppingCart/delete\",\"submitOrder\":o+\"/shopping/submitOrder\",\"cancelOrder\":o+\"/shopping/cancelOrder\",\"payOrder\":o+\"/shopping/payOrder\",\"getPayOrder\":o+\"/shopping/getPayOrder\",\"getWechatJsAppOpenId\":o+\"/index/getWechatJsAppOpenId\",\"shoppingCartUpdate\":o+\"/shoppingCart/update\",\"afterSaleList\":o+\"/user/afterSale/list\",\"afterSaleUploadImage\":o+\"/user/afterSale/uploadImage\",\"afterSaleApply\":o+\"/user/afterSale/apply\",\"afterSaleDetail\":o+\"/user/afterSale/detail\",\"itemDetailList\":o+\"/item/itemDetailList\",\"regionList\":o+\"/item/regionList\",\"similarProductList\":o+\"/item/similarProductList\",\"recommendByCategory\":o+\"/item/recommendByCategory\",\"searchItemByCategoryCom\":o+\"/item/searchItemByCategoryCom\",\"itemIntroduction\":o+\"/item/itemIntroduction\",\"getCount\":o+\"/shoppingCart/getCount\",\"getShopInfoByBusinessId\":o+\"/shopIndex/getShopInfoByBusinessId\",\"getLogisticsFee\":o+\"/item/getLogisticsFee\",\"getBrandList\":o+\"/item/getBrandList\",\"itemInfoList\":o+\"/item/itemInfoList\",\"getLastShelfUpItems\":o+\"/item/getLastShelfUpItems\",\"getFestiveItemList\":o+\"/festiveItem/getFestiveItemList\",\"getCountDown\":o+\"/festiveItem/getCountDown\",\"getFirstList\":o+\"/itemCategoryCommon/getFirstList\",\"getSubCategoryList\":o+\"/itemCategoryCommon/getSubCategoryList\",\"getListByKey\":o+\"/itemCategoryCommon/getListByKey\",\"getListByTag\":o+\"/itemCategoryCommon/getListByTag\",\"getItemListByComIds\":o+\"/itemCategoryCommon/getItemListByComIds\",\"commodityEvaluate\":o+\"/orderEvaluate/commodityEvaluate\",\"orderEvaluateInsert\":o+\"/orderEvaluate/orderEvaluateInsert\",\"uploadPhoto\":o+\"/orderEvaluate/uploadPhoto\",\"selectOrderEvaluate\":o+\"/orderEvaluate/selectOrderEvaluate\",\"shopPraise\":o+\"/shop/shopPraise\",\"shopInformation\":o+\"/shop/shopInformation\",\"getShopSubCategory\":o+\"/shopIndex/getShopSubCategory\",\"searchShopByName\":o+\"/shop/searchShopByName\",\"getShopGetListByKey\":o+\"/shop/getListByKey\",\"searchShopItems\":o+\"/shop/searchShopItems\",\"getShopIndexList\":o+\"/shopIndex/getShopIndexList\",\"getSingleShopIndexList\":o+\"/shopIndex/getSingleShopIndexList\",\"getQualificationCertInfo\":o+\"/shopIndex/getQualificationCertInfo\",\"getShopInfo\":o+\"/shopIndex/getShopInfo\",\"getUserInfo\":o+\"/user/getUserInfo\",\"saveBaseInfo\":o+\"/user/saveBaseInfo\",\"myMessageList\":o+\"/user/myMessageList\",\"myMessageDetail\":o+\"/user/myMessageDetail\",\"myNotReadMessage\":o+\"/user/myNotReadMessage\",\"setMessageRead\":o+\"/message/read\",\"setMessageReadAll\":o+\"/message/readAll\",\"recommendLikeItems\":o+\"/user/recommendLikeItems\",\"recommendNewItems\":o+\"/user/recommendNewItems\",\"userCenterStatistics\":o+\"/user/userCenterStatistics\",\"uploadUserHeadImage\":o+\"/user/uploadUserHeadImage\",\"upload\":o+\"/realNameAuth/upload\",\"realNameAuthAdd\":o+\"/realNameAuth/add\",\"realNameAuthView\":o+\"/realNameAuth/view\",\"idCardCheck\":o+\"/logisticsAddress/idCardCheck\",\"userAtShopList\":o+\"/userAtShop/list\",\"userAtItemList\":o+\"/userAtItem/list\",\"userAtShopAdd\":o+\"/userAtShop/add\",\"userAtShopRemove\":o+\"/userAtShop/remove\",\"userAtItemAdd\":o+\"/userAtItem/add\",\"userAtItemRemove\":o+\"/userAtItem/remove\",\"isFavorite\":o+\"/userAtShop/isFavorite\",\"userAtItemisFavorite\":o+\"/userAtItem/isFavorite\",\"userAtItemRemoveByIds\":o+\"/userAtItem/removeByIds\",\"userAtShopRemoveByIds\":o+\"/userAtShop/removeByIds\",\"logisticsAddress\":o+\"/logisticsAddress/list\",\"saveOrUpdate\":o+\"/logisticsAddress/saveOrUpdate\",\"setDefault\":o+\"/logisticsAddress/setDefault\",\"logisticsAddressRemove\":o+\"/logisticsAddress/remove\",\"getItemOrderlList\":o+\"/user/itemOrder/list\",\"getItemOrderView\":o+\"/user/itemOrder/view\",\"orderEvaluate\":o+\"/user/itemOrder/orderEvaluate\",\"queryLogisticsTracking\":o+\"/user/itemOrder/queryLogisticsTrackingByPackag\",\"doReceived\":o+\"/user/itemOrder/doReceived\",\"gotoPayOrder\":o+\"/shopping/gotoPayOrder\",\"getOrderPackagingDetail\":o+\"/user/itemOrder/getOrderPackagingDetail\",\"logisticsInfo\":o+\"/logisticsInfo/info\",\"shopVisitSave\":o+\"/shopVisit/save\",\"getShopVisitCount\":o+\"/shopVisit/getShopVisitCount\",\"getTagList\":o+\"/activity/getSingleTagActivities\",\"getActivitiesList\":o+\"/activity/getActivitiesByTag\",\"getActivityItemId\":o+\"/activity/getActivityItemByActivityId\",\"getItemListByKey\":o+\"/activity/getFoundGoodThings\",\"getItemByComIds\":o+\"/activity/getItemCategoryItemByComIds\",\"getCouponList\":o+\"/coupon/couponList\",\"getCouponIndexList\":o+\"/coupon/couponIndexList\",\"getmyCouponList\":o+\"/coupon/myCouponList\",\"saveCouponRecord\":o+\"/coupon/saveCouponRecord\",\"getmyCoupon\":o+\"/coupon/myCoupon\",\"reCalculateFee\":o+\"/shopping/reCalculateFee\",\"getUserCouponList\":o+\"/shopping/getUserCouponList\",\"getMarketingItemList\":o+\"/agentGood/getMarketingItemList\",\"agentGoodDetail\":o+\"/agentGood/detail\",\"msGotoSettlement\":o+\"/marketShopping/gotoSettlement\",\"msSubmitOrder\":o+\"/marketShopping/submitOrder\",\"msPayOrder\":o+\"/marketShopping/payOrder\",\"msGetPayOrder\":o+\"/marketShopping/getPayOrder\",\"updateRecommendCode\":o+\"/user/updateRecommendCode\",\"getShufflyList\":o+\"/index/shufflyList\",\"getSearcChoiceness\":o+\"/index/searcChoiceness\",\"getHotStyleList\":o+\"/index/hotStyleList\",\"getHotClassList\":o+\"/index/hotClassList\"},\"getItemListByComIds\",o+\"/activity/getItemCategoryItemByComIds\"),_defineProperty(a,\"getBrandCategoryList\",o+\"/activity/getBrandCategoryList\"),_defineProperty(a,\"getBrandSessionList\",o+\"/activity/getBrandSessionList\"),_defineProperty(a,\"getItemByBrandId\",o+\"/activity/getItemByBrandId\"),_defineProperty(a,\"getCurrentIndexActivities\",o+\"/activity/getCurrentIndexActivities\"),_defineProperty(a,\"getBrandByIds\",o+\"/activity/getBrandByIds\"),_defineProperty(a,\"getActivityCoupons\",o+\"/coupon/getCoupons\"),a);t.a=i}}]);","extractedComments":[]}