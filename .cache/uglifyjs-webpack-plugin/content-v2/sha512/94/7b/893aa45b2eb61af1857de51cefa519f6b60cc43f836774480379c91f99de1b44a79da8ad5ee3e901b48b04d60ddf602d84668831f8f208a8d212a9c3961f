{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{\"294\":function(e,t,a){},\"65\":function(e,t,a){\"use strict\";a.r(t);var n=a(0),s=a(338),i=a(339),o=a(1),r=a(336),c=(a(294),a(68)),l=a(69);var g={\"lastTimestamp\":0,\"throttle\":function throttle(){var e=(new Date).getTime(),t=this.lastTimestamp;return console.log(\"lastTime:\"+t,\"nowTime:\"+e),this.lastTimestamp=e,e-t>800||!t}};a.d(t,\"default\",function(){return h});var d=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}();var h=function(e){function Calendar(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,Calendar);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(Calendar.__proto__||Object.getPrototypeOf(Calendar)).call(this,e));return t.onDayClick=function(e){console.log(\"点击日期\",e),t.setState({\"date\":e.value}),t.getTeacherTime(e.value),Object(i.b)({\"title\":\"加载中\"})},t.onMonthChange=function(e){console.log(\"月份改变\",e),t.setState({\"timeList\":[]});var a=e.split(\"-\")[0]+\"-\"+e.split(\"-\")[1];t.getTeacherTime(a)},t.getSelectTime=function(e,a){var n=t.state.timeList;console.log(n[a]),n[a].select=!n[a].select;var s=t.state.allList;t.state.allList.forEach(function(e,a){e.date==t.state.date&&(s[a].time=n)}),t.setState({\"timeList\":n,\"allList\":s}),n[a].select&&t.getTeacherInTime(t.state.date+\" \"+e.time+\":00\",a)},t.getSubmit=function(){var e=[];console.log(t.state.allList),t.state.allList.forEach(function(a,n){a.time.forEach(function(n){n.select&&e.push({\"teacherId\":t.$router.params.teacherId,\"startTime\":a.date+\" \"+n.time+\":00\"})})}),0!==e.length?g.throttle()&&t.getTeacherSubmit(e):Object(i.d)({\"title\":\"您还没有选择时间噢\",\"icon\":\"none\",\"duration\":2e3})},t.config={\"navigationBarTitleText\":\"选择时间\"},t.state={\"timeList\":[],\"num\":0,\"currentDate\":\"\",\"minDate\":\"\",\"validDates\":\"\",\"time\":\"\",\"date\":\"\",\"allList\":[]},t}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Calendar,o[\"a\"].Component),d(Calendar,[{\"key\":\"componentWillMount\",\"value\":function componentWillMount(){}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){Object(i.b)({\"title\":\"加载中\"}),setTimeout(function(){Object(i.a)()},1e3);var e=new Date;this.setState({\"minDate\":e.toLocaleDateString()});var t=(new Date).getFullYear(),a=(new Date).getMonth()+1;e=t+\"-\"+(a=a<10?\"0\"+a:a),console.log(\"time\",e),this.getTeacherTime(e)}},{\"key\":\"componentWillUnmount\",\"value\":function componentWillUnmount(){}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){var e=window.sessionStorage.getItem(\"time\");console.log(e),\"0\"===e&&window.location.reload(),window.sessionStorage.setItem(\"time\",1)}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){window.sessionStorage.setItem(\"time\",0)}},{\"key\":\"getTeacherSubmit\",\"value\":function getTeacherSubmit(e){Object(c.a)(l.a.getTeacherSubmit,e).then(function(e){console.log(\"提交预约\",e),0==e.data.code&&(Object(i.d)({\"title\":\"提交成功\",\"icon\":\"success\",\"duration\":2e3}),setTimeout(function(){window.history.back(-1)},3e3))}).catch(function(e){console.log(\"提交预约接口异常--\",e)})}},{\"key\":\"getTeacherInTime\",\"value\":function getTeacherInTime(e,t){var a=this;Object(c.a)(l.a.getTeacherInTime,{\"startTime\":e}).then(function(e){e.data.data.createTime&&(Object(i.d)({\"title\":\"您已在当前时间预约过啦~\",\"icon\":\"none\",\"duration\":2e3}),a.getSelectTime(\"\",t)),console.log(\"检查当前时间段是否已预约\",e)}).catch(function(e){console.log(\"检查当前时间段是否已预约接口异常--\",e)})}},{\"key\":\"getTeacherTime\",\"value\":function getTeacherTime(e){var t=this;Object(c.a)(l.a.getTeacherTime,{\"teacherId\":this.$router.params.teacherId,\"startTime\":e}).then(function(a){console.log(\"时间列表\",a),Object(i.a)();var n=e.split(\"-\");if(2==n.length){var s=[],o=[];a.data.data.forEach(function(e){s.push({\"value\":e.startTime.split(\" \")[0].replace(/-/g,\"/\")});var t=[];e.timeFrame.split(\"-\").forEach(function(e){t.push({\"select\":!1,\"time\":e})}),o.push({\"date\":e.startTime.split(\" \")[0],\"time\":t})}),t.setState({\"validDates\":s,\"currentDate\":s[0].value,\"allList\":o})}if(2!=n.length){var r=[],c=(new Date).getFullYear(),l=(new Date).getMonth()+1,g=(new Date).getDate(),d=(new Date).getHours(),h=e.split(\"-\");console.log(t.state.allList,\"this.state.allList\"),t.state.allList.forEach(function(t,a){t.date==e&&t.time.forEach(function(e){h[0]==c&&h[1]==l&&h[2]==g?Number(e.time.split(\":\")[0])>d&&r.push({\"select\":e.select,\"time\":e.time}):r.push({\"select\":e.select,\"time\":e.time})})}),t.setState({\"currentDate\":t.state.validDates[0].value,\"timeList\":r,\"date\":a.data.data[0].startTime.split(\" \")[0]})}else{var m=a.data.data[0].startTime.split(\" \")[0];t.getTeacherTime(m)}}).catch(function(e){console.log(\"时间列表接口异常--\",e)})}},{\"key\":\"render\",\"value\":function render(){var e=this,t=this.state,a=t.timeList,i=t.minDate,o=t.validDates,c=t.currentDate;t.time;return n.j.createElement(r.a,{\"className\":\"calendar\"},n.j.createElement(s.a,{\"onDayClick\":this.onDayClick,\"onMonthChange\":this.onMonthChange,\"minDate\":i,\"validDates\":o,\"currentDate\":c}),0==a.length?n.j.createElement(r.a,{\"className\":\"time-no\"},\"当日无时间段可约\"):n.j.createElement(r.a,{\"className\":\"time\"},a.map(function(t,a){return n.j.createElement(r.a,{\"className\":t.select?\"item on\":\"item\",\"onClick\":e.getSelectTime.bind(e,t,a)},t.time,n.j.createElement(r.a,{\"className\":\"text\"},\"可约\"))})),n.j.createElement(r.a,{\"className\":\"bg\",\"onClick\":this.getSubmit},n.j.createElement(r.a,{\"className\":\"submit\"},\"提交预约\")))}}]),Calendar}()},\"68\":function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return CarryTokenRequest});var n=a(334),s=a(339),i=a(335),o=a(1);function CarryTokenRequest(e,t){return new Promise(function(a,r){Object(n.a)({\"url\":e,\"method\":\"POST\",\"credentials\":\"include\",\"data\":JSON.stringify(t),\"header\":{\"Content-Type\":\"application/json\"},\"success\":function success(e){e.statusCode>=200&&e.statusCode<300?403===e.data.code?Object(s.d)({\"title\":\"暂未登录\",\"icon\":\"none\",\"duration\":1e3,\"success\":function success(){Object(i.a)(\"userinfo\"),setTimeout(function(){o.a.navigateTo({\"url\":\"/page/login/login\"})},1e3)}}):a(e):r(e)},\"fail\":function fail(e){r(e),Object(s.d)({\"title\":\"网络连接失败\",\"icon\":\"none\",\"duration\":1e3})}})})}},\"69\":function(e,t,a){\"use strict\";t.a={\"getLogin\":\"http://121.42.231.22/agent-core/login\",\"getAgentUserDetail\":\"http://121.42.231.22/agent-core/sysUser/selectAgentUserDetail\",\"getagentMessageList\":\"http://121.42.231.22/agent-core/agentMessage/list\",\"getagentMessageDetail\":\"http://121.42.231.22/agent-core/agentMessage/detail\",\"getagentMessageStatus\":\"http://121.42.231.22/agent-core/agentMessage/updateNotReadMessage\",\"getTeacherList\":\"http://121.42.231.22/agent-core/sysAgentTime/selectTeacherAll\",\"getTeacherDetail\":\"http://121.42.231.22/agent-core/sysTeacherInfo/getById\",\"getTeacherTime\":\"http://121.42.231.22/agent-core/sysAgentTime/selectNext\",\"getTeacherSubmit\":\"http://121.42.231.22/agent-core/sysAgentTime/insert\",\"getTeacherUpdate\":\"http://121.42.231.22/agent-core/sysAgentTime/update\",\"getTeacherInTime\":\"http://121.42.231.22/agent-core/sysAgentTime/checkHistory\",\"getReserveList\":\"http://121.42.231.22/agent-core/sysAgentTime/selectAll\",\"getReserveDetail\":\"http://121.42.231.22/agent-core/sysAgentTime/findById\",\"getAddWithdraw\":\"http://121.42.231.22/agent-core/agentWithdraw/add\",\"getBankList\":\"http://121.42.231.22/agent-core/bank/allList\",\"getsendSmsCode\":\"http://121.42.231.22/agent-core/agentWithdraw/sendSmsCode\",\"getstatisticsList\":\"http://121.42.231.22/agent-core/agentIncomeDetail/statisticsList\",\"getselectSubstandardStaff\":\"http://121.42.231.22/agent-core/sysUserAdmin/selectSubstandardStaff\",\"getselectStaffDetail\":\"http://121.42.231.22/agent-core/sysUserAdmin/selectStaffDetail\",\"getsaveDegradation\":\"http://121.42.231.22/agent-core/sysUserAdmin/saveDegradation\",\"getselectNoDemotion\":\"http://121.42.231.22/agent-core/sysUserAdmin/selectNoDemotion\",\"selectAgentUserList\":\"http://121.42.231.22/agent-core/sysUserAdmin/selectAgentUserList\",\"selectVoList\":\"http://121.42.231.22/agent-core/region/selectVoList\",\"selectAgentUserDetail\":\"http://121.42.231.22/agent-core/sysUserAdmin/selectAgentUserDetail\",\"updateAgentUserAdmin\":\"http://121.42.231.22/agent-core/sysUserAdmin/updateAgentUser\",\"selectList\":\"http://121.42.231.22/agent-core/degradationReasonAdmin/selectList\",\"insert\":\"http://121.42.231.22/agent-core/degradationReasonAdmin/insert\",\"delete\":\"http://121.42.231.22/agent-core/degradationReasonAdmin/delete\",\"update\":\"http://121.42.231.22/agent-core/degradationReasonAdmin/update\",\"saveDegradation\":\"http://121.42.231.22/agent-core/sysUser/saveDegradation\",\"updateAgentUser\":\"http://121.42.231.22/agent-core/sysUser/updateAgentUser\",\"list\":\"http://121.42.231.22/agent-core/agentLevel/list\",\"getList\":\"http://121.42.231.22/agent-core/agentLevelAdmin/list\",\"getById\":\"http://121.42.231.22/agent-core/agentLevelAdmin/getById\",\"setEdit\":\"http://121.42.231.22/agent-core/agentLevelAdmin/edit\",\"getDrawAdminList\":\"http://121.42.231.22/agent-core/agentWithdraw/adminList\",\"getDrawPass\":\"http://121.42.231.22/agent-core/agentWithdraw/withdrawPass\",\"getDrawNotPass\":\"http://121.42.231.22/agent-core/agentWithdraw/withdrawNotPass\",\"getDrawDetail\":\"http://121.42.231.22/agent-core/agentWithdraw/detail\",\"getRecordList\":\"http://121.42.231.22/agent-core/agentWithdrawRecord/list\",\"getRecordDetail\":\"http://121.42.231.22/agent-core/agentWithdrawRecord/detail\",\"getAgentLevelList\":\"http://121.42.231.22/agent-core/agentLevelAdmin/list\",\"getAgentLevelById\":\"http://121.42.231.22/agent-core/agentLevel/getById\",\"getAgentLevelEdit\":\"http://121.42.231.22/agent-core/agentLevelAdmin/edit\",\"getAgentLevelDelete\":\"http://121.42.231.22/agent-core/agentLevelAdmin/delete\",\"getAgentLevelAdd\":\"http://121.42.231.22/agent-core/agentLevelAdmin/add\",\"getInterestsConfigList\":\"http://121.42.231.22/agent-core/rightInterestsConfigAdmin/list\",\"getInterestsConfigById\":\"http://121.42.231.22/agent-core/rightInterestsConfigAdmin/getById\",\"getInterestsConfigAdd\":\"http://121.42.231.22/agent-core/rightInterestsConfigAdmin/add\",\"getInterestsConfigEdit\":\"http://121.42.231.22/agent-core/rightInterestsConfigAdmin/edit\",\"getInterestsConfigDelete\":\"http://121.42.231.22/agent-core/rightInterestsConfigAdmin/delete\",\"getSysTeacherInfoGetById\":\"http://121.42.231.22/agent-core/sysTeacherInfo/getById\",\"getsysTeacherInfoInsert\":\"http://121.42.231.22/agent-core/sysTeacherInfo/insert\",\"getSysTeacherInfoUpdate\":\"http://121.42.231.22/agent-core/sysTeacherInfo/update\",\"getSysTeacherInfoDelete\":\"http://121.42.231.22/agent-core/sysTeacherInfo/delete\",\"getSysTeacherInfoSelectAll\":\"http://121.42.231.22/agent-core/sysTeacherInfo/selectAll\",\"getSysTeacherInfoImportUpload\":\"http://121.42.231.22/agent-core/sysTeacherInfo/ImportUpload\",\"getSelectAgentHistory\":\"http://121.42.231.22/agent-core/sysTeacherInfo/selectAgentHistory\",\"getAgentById\":\"http://121.42.231.22/agent-core/sysTeacherInfo/getAgentById\",\"getSysCourseTimeSelectAll\":\"http://121.42.231.22/agent-core/sysCourseTime/selectAll\",\"getSysCourseTimeInsert\":\"http://121.42.231.22/agent-core/sysCourseTime/insert\",\"getSysCourseTimeUpdate\":\"http://121.42.231.22/agent-core/sysCourseTime/update\",\"teamDetailSelectTeamList\":\"http://121.42.231.22/agent-core/teamDetail/selectTeamList\",\"teamDetailCountByMonth\":\"http://121.42.231.22/agent-core/teamDetail/countByMonth\",\"teamDetailCountByLastMonth\":\"http://121.42.231.22/agent-core/teamDetail/countByLastMonth\",\"teamDetailSelectTeamListByAmount\":\"http://121.42.231.22/agent-core/teamDetail/selectTeamListByAmount\",\"teamDetailSelectTeamListOrderNum\":\"http://121.42.231.22/agent-core/teamDetail/selectTeamListOrderNum \"}}}]);","extractedComments":[]}