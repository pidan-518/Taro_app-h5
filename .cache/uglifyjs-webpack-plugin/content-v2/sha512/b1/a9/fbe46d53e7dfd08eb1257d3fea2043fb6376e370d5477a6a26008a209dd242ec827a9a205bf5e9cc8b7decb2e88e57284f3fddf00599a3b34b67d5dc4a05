{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{\"129\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACL0lEQVRYR+2VP2gTURzHv7/X6yBOKmJeJIObg246CRLFQbQiDopaHQRzEZq7A4c4OCjYRQva5EppX4q4KQpOaumiOCg62EEFwUkozUUEQbBY2vR+cukdlvPaXNKkFckb3733+3ze9/05wjo3Wmc+OgKdBP7/BCrZwnFmGmSgnFTmvvCta2sClUuFXezSSwCbPTC7vCc5Zr1bKtE2gamTtzdomzQPvtcHPpXK7FmzBBzdvg/waQ9IwPturatny3Df1JoIlHW7n8BXF+H0Y0Hg6PYR41XUq9vyLXCyhQtguhvAiMWZRCn3YLknv6UC5ezgfmLh7bvf+IpU1q2V/jctE/iWs5PVOX4DIOUDh6QyjXo/u0gBRy8+9CZWQTdSyvhQr4j33dGLzwEcqI1lfiJL1rE48/4ScC7eSUN0vajVAT53u3x2a+juhguXM0VFhIzf/7EqqodTI5enmxJYXI19DeDrfoEvgrl3W8l6HVVwWi/kBeimv/IZYjqUGDO9rYjVlj0DIQkH4F6prFoyQfuaGTrhkvv4Tw+dksp4FIvsD1rxEC6VYOA7MZ2TJWPcm1vR7d0gnmSG5tfKS2UONAL3xta9BaEkfjLo/MLG+QltRpsEsLMGJBqWo0Zfo/BYAhFnYh7EE2AK3vVxqcwjzcBjC0RIBDv4aXbu18Ed9/KVtgtESMwSRDqhcm+bhTeUQACpnQnmNIQYkKO5Z6uBNyWwWmB4ft1b0GpgR6CTwD+XwG8WtrshNyjkNwAAAABJRU5ErkJggg==\"},\"180\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABlElEQVRYR+2UO1ICQRCGuwETTbiAiV5BE00gVwPxCGqg4vRQpFpbklJMj6iBeAQ1EHNNNNEraMIFSDThMdZSQC2PZR9Ckeym2/1/X/VuN8KcH5wzHyKBaALRBP41ASnlkb3GSqmbsOscWoCIdgHgoQvOMPNjGIlQArlcbqPdbr8CwEIX2ojFYqlSqfQeVCKwgJRyxRhjw5eHYDVETCmlvoNIBBKwLGuxXq/b8HUXyEcymUxZlvXrVyKQABE9AcC2R3iVmXemLiClvDXGHPgJRsSKUurQV62fIiK6AIAzP7WOmgIzn3v1eH4CIjoGgCuvIJf3J8x8Pal3ooAQIoOI9yHhnTZjzJ7WuncvRqJcBYhoEwBeHLse1qMBAGlmfhsXMFYgm82uxuNxGz6862Elaq1WK10ul7+GA0YE8vn8UrPZtHd9LSzNpe8zkUikisXij/P9iIAQooqIW1OG9/6HZ631wB0ZECCiCgDszwLuyLxj5v496QsIIQqIeDpjeG8Sl1rrzl3xvAOzFooEoglEE5j7BP4AnMlwIZrCbNwAAAAASUVORK5CYII=\"},\"181\":function(e,t){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABn0lEQVRYR+2Uv1LCQBDGdwEbbXgBG30FbbQJvVqIj6AWKt7B0OpkpGW4PVEL8RHUQuy10UZfQRtegEYb/qxzDjD8S0IS0CbXpMjt9/2ym/0Q/vngP/tDBBB1IOpArwNCiAIiHv/FWjLzudb6xHgNjEBKWQGA3RlD3BDRXtdj5B8QQlQRcWMWEMz8qLXe7NceAcjn8wvNZvMZAFamDPGeSCSsYrH45QpgXmYymeV4PP4EAItTgqi1Wq1UuVz+GNZzXEMp5ToAGIi5kBANAEgR0cs4HdccEEKkEfE2DAAz72it75w0PINISnkIABcBIY6I6NKt1hPAFEspzwDgd299nAIRnXrdnwjAiGSz2Wtm7u2v61chVpRS+17mI0HkVSClfACAgT0eU1Mloi0vLccgciu0bXu+Xq+bjFh1uPeWTCYt27a/ZwLQGcUSMxuI4YyoIaKllPqc1Nz3CLrCuVxurd1uG4huRjRisZhVKpVe/ZgHBuhsxjYAdPc7TUT3fs1DAXTGcWCeSqmrIOahAYKa9tdNnAPTMBunEQFEHYg68APUXnAhTTxeSgAAAABJRU5ErkJggg==\"},\"310\":function(e,t,a){},\"39\":function(e,t,a){\"use strict\";a.r(t);var s=a(0),i=a(1),r=a(123),o=a(18),c=a(7),l=a(8),n=a(406),h=a(116),d=a(100),u=a(136),m=(a(90),a(310),a(91)),g=a(92),p=a(102),S=a(101),f=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),A=function get(e,t,a){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,t);if(void 0===s){var i=Object.getPrototypeOf(e);return null===i?void 0:get(i,t,a)}if(\"value\"in s)return s.value;var r=s.get;return void 0!==r?r.call(a):void 0};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var y=function(e){function SearchPage(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,SearchPage);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(SearchPage.__proto__||Object.getPrototypeOf(SearchPage)).call(this,e));return t.handleCloseMask=function(){(t.state.isSales||t.state.isPrice)&&t.setState({\"isSales\":!1,\"isPrice\":!1})},t.handleNavigateBack=function(){i.a.navigateBack({\"delta\":1})},t.handleSearchInput=function(e){clearTimeout(t.state.timer),t.setState({\"searchVal\":e.detail.value,\"isShow\":!1}),\"\"!==e.detail.value?e.detail.value.match(/^\\s*$/)||(t.state.timer=setTimeout(function(){t.searchItems(e.detail.value,1)},300)):t.setState({\"searchList\":[],\"isShow\":!0,\"visible\":!1})},t.handleSearchInputConfirm=function(e){if(!e.detail.value.match(/^\\s*$/)){var a=t.state.searchHistory;a.unshift(t.state.searchVal),t.setState({\"goodsList\":[],\"isShow\":!0,\"visible\":!0,\"searchVal\":e.detail.value,\"searchHistory\":t.unique(a),\"saleOrder\":\"\",\"priceOrder\":\"\",\"updateOrder\":\"\",\"isSalesDrop\":!1,\"isSalesRise\":!1,\"isPriceDrop\":!1,\"isPriceRise\":!1,\"isNewest\":!1},function(){window.sessionStorage.setItem(\"searchHistory\",JSON.stringify(t.state.searchHistory)),t.getSearchGoods()})}},t.handleSearchInputFocus=function(e){\"\"!==e.detail.value?e.detail.value.match(/^\\s*$/)||t.setState({\"isShow\":!1},function(){t.searchItems(t.state.searchVal,1)}):t.setState({\"isShow\":!0,\"visible\":!1})},t.handleSearchInputBlur=function(e){setTimeout(function(){t.setState({\"isShow\":!0})},100)},t.handleSearchItemClick=function(e){var a=t.state.searchHistory;a.unshift(e),t.setState({\"goodsList\":[],\"isShow\":!0,\"visible\":!0,\"searchVal\":e,\"searchHistory\":t.unique(a),\"saleOrder\":\"\",\"priceOrder\":\"\",\"updateOrder\":\"\",\"isSalesDrop\":!1,\"isSalesRise\":!1,\"isPriceDrop\":!1,\"isPriceRise\":!1,\"isNewest\":!1},function(){window.sessionStorage.setItem(\"searchHistory\",JSON.stringify(t.state.searchHistory)),t.getSearchGoods()})},t.handleDeleteSearchHistory=function(){t.setState({\"searchHistory\":[]},function(){window.sessionStorage.removeItem(\"searchHistory\")})},t.handleSearchHistoryItem=function(e){t.setState({\"visible\":!0,\"goodsList\":[],\"searchVal\":e,\"saleOrder\":\"\",\"priceOrder\":\"\",\"updateOrder\":\"\",\"isSalesDrop\":!1,\"isSalesRise\":!1,\"isPriceDrop\":!1,\"isPriceRise\":!1,\"isNewest\":!1},function(){t.getSearchGoods()})},t.handleHotItemClick=function(e){var a=t.state.searchHistory;a.unshift(e),t.setState({\"visible\":!0,\"goodsList\":[],\"searchVal\":e,\"searchHistory\":t.unique(a)},function(){window.sessionStorage.setItem(\"searchHistory\",JSON.stringify(t.state.searchHistory)),t.getSearchGoods()})},t.handleSalesSortClick=function(){t.state.isSales?t.setState({\"isSales\":!1}):t.setState({\"isSales\":!0,\"isPrice\":!1})},t.handleSalesDropClick=function(){t.setState({\"isSalesDrop\":!0,\"isSalesRise\":!1,\"isPriceDrop\":!1,\"isPriceRise\":!1,\"saleOrder\":1,\"priceOrder\":\"\",\"isNewest\":!1,\"updateOrder\":\"\",\"goodsList\":[]},function(){t.getSearchGoods()})},t.handleSalesRiseClick=function(){t.setState({\"isSalesDrop\":!1,\"isSalesRise\":!0,\"isPriceDrop\":!1,\"isPriceRise\":!1,\"saleOrder\":0,\"priceOrder\":\"\",\"isNewest\":!1,\"updateOrder\":\"\",\"goodsList\":[]},function(){t.getSearchGoods()})},t.handlePriceSortClick=function(){t.state.isPrice?t.setState({\"isPrice\":!1}):t.setState({\"isPrice\":!0,\"isSales\":!1})},t.handlePriceDropClick=function(){t.setState({\"isPriceDrop\":!0,\"isPriceRise\":!1,\"isSalesDrop\":!1,\"isSalesRise\":!1,\"saleOrder\":\"\",\"priceOrder\":1,\"isNewest\":!1,\"updateOrder\":\"\",\"goodsList\":[]},function(){t.getSearchGoods()})},t.handlePriceRiseClick=function(){t.setState({\"isPriceDrop\":!1,\"isPriceRise\":!0,\"isSalesDrop\":!1,\"isSalesRise\":!1,\"saleOrder\":\"\",\"priceOrder\":0,\"isNewest\":!1,\"updateOrder\":\"\",\"goodsList\":[]},function(){t.getSearchGoods()})},t.handleRecentlyAddedClick=function(){t.setState({\"isSalesDrop\":!1,\"isSalesRise\":!1,\"isPriceDrop\":!1,\"isPriceRise\":!1,\"isSales\":!1,\"isPrice\":!1,\"priceOrder\":\"\",\"saleOrder\":\"\",\"goodsList\":[]}),t.state.isNewest?t.setState({\"isNewest\":!1,\"updateOrder\":\"\"},function(){t.getSearchGoods()}):t.setState({\"isNewest\":!0,\"updateOrder\":1},function(){t.getSearchGoods()})},t.getHotSearchWord=function(){Object(m.b)(g.a.hotSearchWord,{\"len\":30,\"current\":1}).then(function(e){console.log(\"获取热搜词成功\",e.data),200===e.statusCode&&t.setState({\"hotWords\":e.data.records})}).catch(function(e){console.log(\"返回数据失败\",e)})},t.config={\"onReachBottomDistance\":50,\"navigationStyle\":\"custom\"},t.state={\"searchVal\":\"\",\"timer\":null,\"TopHeight\":45,\"searchListHeight\":\"\",\"searchList\":[],\"paddingTop\":\"\",\"goodsList\":[],\"isShow\":!0,\"goodsCurrent\":1,\"goodsPages\":\"\",\"visible\":!1,\"searchHistory\":[],\"hotWords\":[],\"riseIcon\":a(180),\"dropIcon\":a(181),\"isSales\":!1,\"isPrice\":!1,\"isSalesDrop\":!1,\"isSalesRise\":!1,\"isPriceDrop\":!1,\"isPriceRise\":!1,\"isNewest\":!1,\"saleOrder\":\"\",\"priceOrder\":\"\",\"updateOrder\":\"\"},t}return function _inherits(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{\"constructor\":{\"value\":e,\"enumerable\":!1,\"writable\":!0,\"configurable\":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(SearchPage,i[\"a\"].Component),f(SearchPage,[{\"key\":\"onReachBottom\",\"value\":function onReachBottom(){this.state.goodsPages>this.state.goodsCurrent&&this.getSearchGoods(this.state.goodsCurrent+1)}},{\"key\":\"onPageScroll\",\"value\":function onPageScroll(e){this.setState({\"isSales\":!1,\"isPrice\":!1})}},{\"key\":\"searchItems\",\"value\":function searchItems(e,t){var a=this;Object(m.b)(g.a.searchItems,{\"current\":t,\"len\":10,\"keyword\":\"\"+e,\"source\":40}).then(function(e){console.log(\"搜索关键词返回数据成功\",e.data),0===e.data.code&&a.setState({\"searchList\":e.data.data.records})}).catch(function(e){console.log(\"搜索关键词返回数据失败\",e)})}},{\"key\":\"getSearchGoods\",\"value\":function getSearchGoods(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(m.b)(g.a.searchItems,{\"current\":t,\"len\":10,\"source\":40,\"keyword\":this.state.searchVal,\"sortPrice\":this.state.priceOrder,\"sortSaleNum\":this.state.saleOrder,\"sortTimer\":this.state.updateOrder}).then(function(t){console.log(\"搜索商品列表返回数据成功\",t.data),0===t.data.code&&e.setState({\"goodsList\":[].concat(_toConsumableArray(e.state.goodsList),_toConsumableArray(t.data.data.records)),\"goodsCurrent\":t.data.data.current+1,\"goodsPages\":t.data.data.pages})}).catch(function(e){console.log(\"搜索关键词返回数据失败\",e)})}},{\"key\":\"unique\",\"value\":function unique(e){return Array.from(new Set(e))}},{\"key\":\"componentWillMount\",\"value\":function componentWillMount(){this.getHotSearchWord();var e=window.sessionStorage.getItem(\"searchHistory\")||\"\";\"\"!==e&&this.setState({\"searchHistory\":JSON.parse(e)})}},{\"key\":\"componentDidMount\",\"value\":function componentDidMount(){var e=this,t=Object(r.a)(),a=this.$router.params.hotText||\"\";document.getElementById(\"search-page-head\");t.select(\"#search-page-head\").boundingClientRect(function(t){console.log(t),e.setState({},function(){Object(o.a)({\"success\":function success(t){e.setState({\"searchListHeight\":t.screenHeight,\"searchVal\":decodeURI(a)})}})})}).exec()}},{\"key\":\"componentDidShow\",\"value\":function componentDidShow(){Object(o.a)({}).then(function(e){i.a.$navBarMarginTop=e.statusBarHeight||0}),this._offReachBottom=Object(c.a)({\"callback\":this.onReachBottom,\"ctx\":this,\"onReachBottomDistance\":50}),this._offPageScroll=Object(l.a)({\"callback\":this.onPageScroll,\"ctx\":this})}},{\"key\":\"render\",\"value\":function render(){var e=this,t=this.state,i=t.TopHeight,r=t.searchListHeight,o=t.searchList,c=t.goodsList,l=t.isShow,m=t.searchVal,g=t.visible,f=t.searchHistory,A=t.hotWords,y=t.riseIcon,E=t.dropIcon,v=t.isSales,C=t.isPrice,P=t.isSalesDrop,w=t.isSalesRise,b=t.isPriceDrop,k=t.isPriceRise,I=t.isNewest;return s.l.createElement(n.a,{\"onClick\":this.handleCloseMask},s.l.createElement(n.a,{\"id\":\"search-page-head\"},s.l.createElement(n.a,{\"className\":\"search-page-head-nav\"},s.l.createElement(\"img\",{\"onClick\":this.handleNavigateBack,\"className\":\"left-icon\",\"src\":a(132)}),s.l.createElement(n.a,{\"className\":\"search-input\"},s.l.createElement(\"img\",{\"src\":a(130)}),s.l.createElement(h.a,{\"type\":\"text\",\"id\":\"searchInput\",\"value\":m,\"onFocus\":this.handleSearchInputFocus,\"onBlur\":this.handleSearchInputBlur,\"placeholder\":\"点击搜索您想要的商品\",\"onConfirm\":this.handleSearchInputConfirm,\"onInput\":this.handleSearchInput})))),s.l.createElement(n.a,{\"className\":\"filter-row\"},s.l.createElement(n.a,{\"className\":\"filter-item-box\"},s.l.createElement(n.a,{\"className\":\"filter-item\",\"onClick\":this.handleSalesSortClick},s.l.createElement(n.a,null,\"销量排序\"),s.l.createElement(\"img\",{\"src\":v?y:E})),s.l.createElement(n.a,{\"className\":\"mask\",\"style\":{\"display\":v?\"block\":\"none\",\"height\":r-i+\"px\"}},s.l.createElement(n.a,{\"className\":\"item-select\"},s.l.createElement(n.a,{\"className\":\"select-text\",\"onClick\":this.handleSalesDropClick},s.l.createElement(n.a,{\"style\":{\"color\":P?\"#ff5d8c\":null}},\"销量降序\"),s.l.createElement(\"img\",{\"className\":\"select-icon\",\"src\":P?a(129):null})),s.l.createElement(n.a,{\"className\":\"select-text\",\"onClick\":this.handleSalesRiseClick},s.l.createElement(n.a,{\"style\":{\"color\":w?\"#ff5d8c\":null}},\"销量升序\"),s.l.createElement(\"img\",{\"className\":\"select-icon\",\"src\":w?a(129):null}))))),s.l.createElement(n.a,{\"className\":\"filter-item-box\"},s.l.createElement(n.a,{\"className\":\"filter-item\",\"onClick\":this.handlePriceSortClick},s.l.createElement(n.a,null,\"价格排序\"),s.l.createElement(\"img\",{\"src\":C?y:E})),s.l.createElement(n.a,{\"className\":\"mask\",\"style\":{\"display\":C?\"block\":\"none\",\"height\":r-i+\"px\"}},s.l.createElement(n.a,{\"className\":\"item-select\"},s.l.createElement(n.a,{\"className\":\"select-text\",\"onClick\":this.handlePriceDropClick},s.l.createElement(n.a,{\"style\":{\"color\":b?\"#ff5d8c\":null}},\"价格降序\"),s.l.createElement(\"img\",{\"className\":\"select-icon\",\"src\":b?a(129):null})),s.l.createElement(n.a,{\"className\":\"select-text\",\"onClick\":this.handlePriceRiseClick},s.l.createElement(n.a,{\"style\":{\"color\":k?\"#ff5d8c\":null}},\"价格升序\"),s.l.createElement(\"img\",{\"className\":\"select-icon\",\"src\":k?a(129):null}))))),s.l.createElement(n.a,{\"className\":\"filter-item-box\"},s.l.createElement(n.a,{\"className\":\"filter-item\",\"onClick\":this.handleRecentlyAddedClick},s.l.createElement(n.a,{\"style\":{\"color\":I?\"#ff5d8c\":null}},\"最近上新\")))),s.l.createElement(n.a,{\"id\":\"search-list\",\"style\":{\"top\":i+\"px\",\"height\":r-i+\"px\",\"display\":l?\"none\":\"block\"}},o.map(function(t){return s.l.createElement(n.a,{\"className\":\"search-list-item\",\"key\":t.itemId,\"onClick\":e.handleSearchItemClick.bind(e,t.itemName),\"style\":{\"display\":\"-webkit-box\",\"-webkit-box-orient\":\"vertical\",\"-webkit-line-clamp\":1,\"overflow\":\"hidden\"}},t.itemName)})),s.l.createElement(n.a,{\"id\":\"search-page\",\"style\":{\"paddingTop\":i+\"px\"}},s.l.createElement(n.a,{\"className\":\"search-goods\"},0===c.length?s.l.createElement(p.a,{\"content\":\"暂无商品\"}):s.l.createElement(u.a,{\"goodsList\":c,\"hasTitle\":!0}))),s.l.createElement(n.a,{\"id\":\"history-record-wrap\",\"style\":{\"top\":i+\"px\",\"height\":r-i+\"px\",\"display\":g?\"none\":\"block\"}},0===f.length?null:s.l.createElement(n.a,{\"className\":\"history-content\"},s.l.createElement(n.a,{\"className\":\"history-line\"},s.l.createElement(d.a,null,\"搜索历史\"),s.l.createElement(\"img\",{\"onClick\":this.handleDeleteSearchHistory,\"src\":a(196)})),s.l.createElement(n.a,{\"className\":\"history-list\"},f.map(function(t,a){return s.l.createElement(n.a,{\"key\":a+1,\"onClick\":e.handleSearchHistoryItem.bind(e,t),\"className\":\"history-list-item\",\"style\":{\"-webkit-box-orient\":\"vertical\"}},t)}))),s.l.createElement(n.a,{\"className\":\"hot-search-words\"},s.l.createElement(n.a,{\"className\":\"hot-title\"},\"热搜词\"),s.l.createElement(n.a,{\"className\":\"hot-list\"},A.map(function(t){return s.l.createElement(n.a,{\"className\":\"hot-list-item\",\"key\":t.id,\"onClick\":e.handleHotItemClick.bind(e,t.title)},t.title)}))),s.l.createElement(n.a,{\"className\":\"search-shop\"},s.l.createElement(S.a,{\"url\":\"/pages/searchshop/searchshop\"},s.l.createElement(n.a,{\"className\":\"search-shop-text\"},\"切换店铺搜索\")))))}},{\"key\":\"componentDidHide\",\"value\":function componentDidHide(){A(SearchPage.prototype.__proto__||Object.getPrototypeOf(SearchPage.prototype),\"componentDidHide\",this)&&A(SearchPage.prototype.__proto__||Object.getPrototypeOf(SearchPage.prototype),\"componentDidHide\",this).call(this),this._offReachBottom&&this._offReachBottom(),this._offPageScroll&&this._offPageScroll()}}]),SearchPage}();t.default=y}}]);","extractedComments":[]}